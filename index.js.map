{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\nconst API_KEY = '46284520-d906981dc6cb4e25f7cb86bba';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\n/**\n * Функція для отримання зображень з Pixabay\n * @param {string} searchQuery - запит для пошуку\n * @param {number} page - номер сторінки для пагінації (за замовчуванням 1)\n * @param {number} perPage - кількість зображень на сторінку (за замовчуванням 15)\n * @returns {Promise} - обіцянка, що повертає дані з Pixabay\n */\nexport async function fetchImages(searchQuery, page=1) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15, \n    page: page, \n  });\n\n  const url = `${ BASE_URL }?${ searchParams.toString()}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;}\n  catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\n\n","'use strict';\n\n/**\n * Функція для відображення зображень у галереї\n * @param {Array} hits - масив зображень\n * @param {HTMLElement} gallery - контейнер для зображень\n */\n\n\nexport function renderImages(images, galleryElement) {\n    const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"300\" loading=\"lazy\"/>\n        </a>\n        <ul class=\"info\">\n          <li class=\"info-item\">\n            <p>Likes</p>\n            <span class=\"info-value\">${likes}</span>\n          </li>\n          <li class=\"info-item\">\n            <p>Views</p>\n            <span class=\"info-value\">${views}</span>\n          </li>\n          <li class=\"info-item\">\n            <p>Comments</p>\n            <span class=\"info-value\">${comments}</span>\n          </li>\n          <li class=\"info-item\">\n            <p>Downloads</p>\n            <span class=\"info-value\">${downloads}</span>\n          </li>\n        </ul>\n      </div>`\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}","'use strict';\n\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\n\nconst searchInput = document.querySelector('#search-input');\nconst fetchSearchBtn = document.querySelector('.btn');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet lightbox;\n\nfetchSearchBtn.addEventListener('click', async (event) => {\n  event.preventDefault();\n\n  const searchQuery = searchInput.value.trim();\n  if (!searchQuery) {\n    iziToast.show({ message: 'Please try again!' });\n    return;\n  }\n  currentQuery = searchQuery;\n  currentPage = 1;\n  clearGallery(gallery);\n  loader.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\ntry {\n  const data = await fetchImages(searchQuery, currentPage);\n  console.log(data);\n  loader.style.display = 'none';\n\n  if (!data.hits || data.hits.length === 0) {\n    iziToast.show({ message: 'No images found for your query. Please try another search.' });\n    return;\n  }\n    \n  renderImages(data.hits, gallery);\n  loadMoreBtn.style.display = 'block';\n  lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n  lightbox.refresh();\n  searchInput.value = '';\n  if (data.hits.length < 15) { loadMoreBtn.style.display = 'none'; }\n\n}\ncatch (error) { console.error('Error fetching images:', error);\n  loader.style.display = 'none';\n  iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again!' });\n}\n});\n\n\nfunction scrollToNextGroup() {\n  const { height: cardHeight } = document.querySelector('.gallery a').getBoundingClientRect();\n  window.scrollBy({top: cardHeight * 2,\n                  behavior: 'smooth',\n  });\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  currentPage += 1; \n \n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    console.log('Response received from API:', data);\n    \n    if (data.hits && data.hits.length > 0) {\n      renderImages(data.hits, gallery);\n      loader.style.display = 'none';\n      lightbox.refresh();\n\n      if(data.hits.length<15) {loadMoreBtn.style.display = 'none;'}\n      scrollToNextGroup();\n    } else {\n      iziToast.show({ message: \"We're sorry, but you've reached the end of search results.\" });\n      loadMoreBtn.style.display = 'none';\n    }\n    } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Sorry, something went wrong. Please try again!' });\n  }\n})\n\n    "],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","searchParams","url","axios","error","renderImages","images","galleryElement","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","searchInput","fetchSearchBtn","gallery","loader","loadMoreBtn","currentPage","currentQuery","lightbox","event","iziToast","data","SimpleLightbox","scrollToNextGroup","cardHeight"],"mappings":"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"}